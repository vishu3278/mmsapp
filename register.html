<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Register Store</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="css/material-icons.css">
    <link rel="stylesheet" href="css/materialize.min.css">
    <link rel="stylesheet" href="css/mobile.css">
    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        // $('select').material_select();
        $('#address, #remarks').characterCounter();
        /*$("#category").on('change', function() {
            if ($(this).val() == 0) {
                $("#otherInput").removeClass("hide");
            } else {
                $("#otherInput").addClass("hide");
            }
        });*/
        $('.modal').modal();
        /*$('#modal1').modal({
            complete:function() {
                $("form.input-group").reset();
            }
        });*/
    });
    </script>
</head>

<body>
    <nav>
        <div class="nav-wrapper pink darken-4">
            <a href="#!" class="brand-logo center">Register Store</a>
            <ul id="nav-mobile" class="left">
                <li><a href="home.html"><i class="mdi-arrow_back "></i></a></li>
            </ul>
        </div>
    </nav>
    <div class="content container order">
        <div class="progress hide">
            <div class="indeterminate"></div>
        </div>
        <div class="chip red lighten-3 hide" style="width:100%;">Invalid credentials !</div>
        <form class="input-group" style="position:relative;">
            <div class="overlay hide"></div>
            <div class="form-background">
                <div class="input-field">
                    <input type="text" id="name">
                    <label>Store Name</label>
                </div>
                <div class="input-field">
                    <textarea id="address" class="materialize-textarea" data-length="120"></textarea>
                    <label>Address</label>
                </div>
                <div class="input-field">
                    <input type="text" id="person">
                    <label>Contact Person</label>
                </div>
                <div class="input-field">
                    <input type="tel" id="phone" class="validate">
                    <label data-error="Invalid phone">Contact Number</label>
                </div>
                <div class="input-field">
                    <input type="email" id="email" class="validate">
                    <label data-error="Invalid email">Email</label>
                </div>
                <!-- <div class="input-field">
                    <select name="category" id="category">
                        <option value="1">Grocery</option>
                        <option value="2">Fashion</option>
                        <option value="3">Electronics</option>
                        <option value="0">Other</option>
                    </select>
                    <label>Type of Store</label>
                </div> -->
                <!-- <div class="input-field hide" id="otherInput">
                    <input type="text">
                    <label>Other Category</label>
                </div> -->
                <div class="input-field">
                    <textarea id="remarks" class="materialize-textarea" data-length="120"></textarea>
                    <label>Remarks</label>
                </div>
            </div>
            <div class="footer-button">
                <div class="input-field">
                    <button type="button" id="register" class="btn btn-large btn-block waves-effect pink darken-4" style="width:100%;">Register</button>
                </div>
                <div class="input-field"><a href="home.html" class="btn btn-large btn-block waves-effect green" style="width:100%;">Back</a></div>
            </div>
        </form>
    </div>
    <!-- <a class="waves-effect waves-light btn" href="#modal1">Modal</a> -->
    <div id="modal1" class="modal bottom-sheet">
        <div class="modal-content">
            
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect btn btn-block pink darken-4">OK</a>
        </div>
    </div>
    <script type="text/javascript">
    $(function($) {
        var input = {
            "sales_person_id": "14",
            "name": "MegaMart",
            "phoneno": "9889897860",
            "cont_person": "Rohit Kumar",
            "date": "24-5-2017",
            "address": "Sector-16",
            "city": "Sector-15",
            "state": "uttar pradesh",
            "country": "India",
            "pincode": "201301",
            "remark": "Reliable Store",
            "status": "enabled"
        };
        $("#register").on('click', function() {
            var name = $("#name").val(),
                address = $("#address").val(),
                cont_person = $("#person").val(),
                phoneno = $("#phone").val(),
                email = $("#email").val(),
                remark = $("#remarks").val()
            date = new Date();
            var data = {
                "sales_person_id": sessionStorage.getItem('sales_person_id'),
                "name": name,
                "phoneno": phoneno,
                "cont_person": cont_person,
                "date": date,
                "address": address,
                "city": "Sector-15",
                "state": "uttar pradesh",
                "country": "India",
                "pincode": "201301",
                "remark": remark,
                "status": "enabled"
            }

            console.log(JSON.stringify(data));

            $(".progress, .overlay").removeClass("hide");

            $.ajax({
                url: 'http://wowitsolutions.com/mmsMobile/mmsstoreadmin/apis/storeadd.php',
                type: 'POST',
                crossDomain: true,
                data: JSON.stringify(data),
                success: function(result) {
                    if (result.status == 1) {
                        
                        // window.location.assign("home.html");
                        $("#modal1 .modal-content").html("<p>"+result.data+"</p>");
                        $('#modal1').modal('open');
                        $(".progress, .overlay").addClass("hide");
                        $("form.input-group").reset();
                    } else {
                        // alert(result.status);
                        $(".progress, .overlay").addClass("hide");
                        $(".chip").removeClass("hide").html(result.error);
                    }
                },
                error: function() {
                    alert("Some error occured !")
                }
            });
        })
    })
    </script>
</body>

</html>
